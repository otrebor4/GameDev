'''
Created on Jan 28, 2014

@author: otrebor
'''
import game.base.Component as Component
import game.main.pygame as pygame

class ClickToMove(Component.Component):
    def __init__(self,gameObject):
        Component.Component.__init__(self, gameObject)
        self.targe = None
        self.shape = gameObject.shape
        self.speed = 10
        
    def update(self,delta):
        if self.shape == None:
            return
        pos = pygame.mouse.get_pos()
        (left, mid, right) = pygame.mouse.get_pressed()
        if left or mid or right:
            self.targe = pos
        if self.targe != None:
            dir = self.targe.sub(self.shape.position).normalize()
            dis = self.shape.position.dot(self.targe)
            dir = dir.scale(self.speed if self.speed < dis else dis)
            
        